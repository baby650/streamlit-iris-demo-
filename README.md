# Iris Classification App（アヤメ分類アプリ / 決定木モデル）

機械学習モデル（決定木）を使用して  
**4つの計測値からアヤメの品種を分類する Web アプリ**です。

Streamlit で構築されており、ブラウザだけで利用できます。

---

## 🚀 デモアプリ（Streamlit Cloud）

👉 **アプリURL：https://ty4qjgdertpkpaqnvdtvfp.streamlit.app/
> **Note:**
> Streamlit Cloud（無料プラン）はシングルスレッドで動作しており、同時接続が増えるとレスポンスが順次遅延します。
> そのため、3〜5人程度のアクセスが「安全マージンのある同時アクセス数」となります。また、3秒に1回までの実行に制限しています。

---

## 📘 アプリ概要

このアプリは、以下の 4 つの値を入力すると  
「アヤメの品種」を自動で予測します。

- がく片の長さ（Sepal Length）
- がく片の幅（Sepal Width）
- 花弁の長さ（Petal Length）
- 花弁の幅（Petal Width）

予測結果は数値とカテゴリ名で表示されます。

### 📊 選べる可視化モード
サイドバーで以下の3つのモードを切り替えて、データの構造や予測の根拠を視覚的に確認できます。

1. **決定木 (Tree)**
   - モデルの判断ロジックをExcel風のフローチャートで表示します。
   - どの条件で分岐したかを追うことができます。

2. **PCA (2D Map)**
   - 主成分分析（PCA）でデータを2次元に圧縮した散布図です。
   - データ全体の分布と、入力データの位置（★マーク）を確認できます。

3. **PCA (3D Map)**
   - PCAで3次元に圧縮したインタラクティブな散布図です。
   - マウスで回転・ズームができ、立体的な位置関係を把握できます。

---

## 🌼 分類対象のアヤメ（Iris）の種類

以下の 3 種類の品種を分類できます：

- **Iris setosa（セトサ）**
- **Iris versicolor（バーシカラー）**
- **Iris virginica（バージニカ）**

### 参考画像（petal / sepal の位置）


<img width="626" height="281" alt="スクリーンショット 2025-12-04 134650" src="https://github.com/user-attachments/assets/f1c517b9-565c-443c-9211-c567b363951d" />

---

## 🔧 使用している機械学習モデル

- **アルゴリズム**：Decision Tree（決定木）
- **max_depth = 3**（デフォルト・変更可能）
- **学習データ**：Iris Dataset（scikit-learn）
- **学習方法**：アプリ起動時に動的に学習（オンザフライ学習）
　※ ユーザーが設定した「木の深さ」に基づいてその場で学習します。

```python
# アプリ内で動的に学習
model = DecisionTreeClassifier(max_depth=selected_depth, random_state=42)
model.fit(X, y)
```

## 🧠 アルゴリズム概要

### 1. 決定木 (Decision Tree)
各特徴量について、データを最も良く分ける（不純度を下げる）閾値を探し、条件分岐を繰り返して分類します。
（例：花弁の長さ ≤ 2.45 cm なら setosa）

### 2. PCA (主成分分析)
4次元（4つの特徴量）のデータを、情報の損失を最小限に抑えつつ、2次元または3次元に「要約」する手法です。
これにより、人間が視覚的に理解できるグラフとしてデータを表現できます。

